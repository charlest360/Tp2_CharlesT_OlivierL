{"remainingRequest":"C:\\Users\\carlo\\Documents\\TP2\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\carlo\\Documents\\TP2\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\carlo\\Documents\\TP2\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\carlo\\Documents\\TP2\\src\\components\\FilmReviewDisplay.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\carlo\\Documents\\TP2\\src\\components\\FilmReviewDisplay.vue","mtime":1590015493025},{"path":"C:\\Users\\carlo\\Documents\\TP2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\carlo\\Documents\\TP2\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\carlo\\Documents\\TP2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\carlo\\Documents\\TP2\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBTdGFyUmF0aW5nIGZyb20gJ3Z1ZS1zdGFyLXJhdGluZyc7CmltcG9ydCBGaWxtU2VydmljZSBmcm9tICdAL3NlcnZpY2VzL0ZpbG1TZXJ2aWNlLmpzJzsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICBmaWxtSW5mb3M6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBudWxsLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfQogIH0sCiAgY29tcG9uZW50czogewogICAgU3RhclJhdGluZzogU3RhclJhdGluZwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZpbG1Dcml0aWNzOiB7CiAgICAgICAgJ2VtcHR5JzogJ3N0cmluZycKICAgICAgfSwKICAgICAgY3JpdGljc0F2ZXJhZ2U6IG51bGwsCiAgICAgIG5iT2ZDcml0aWNzOiAwCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0RmlsbUNyaXRpY3MoKTsKICB9LAogIHdhdGNoOiB7CiAgICBmaWxtSW5mb3M6IGZ1bmN0aW9uIGZpbG1JbmZvcygpIHsKICAgICAgdGhpcy5nZXRGaWxtQ3JpdGljcygpOwogICAgfSwKICAgIGZpbG1Dcml0aWNzOiBmdW5jdGlvbiBmaWxtQ3JpdGljcygpIHsKICAgICAgdGhpcy5uYk9mQ3JpdGljcyA9IHRoaXMuZmlsbUNyaXRpY3MubGVuZ3RoOwogICAgfSwKICAgIG5iT2ZDcml0aWNzOiBmdW5jdGlvbiBuYk9mQ3JpdGljcygpIHsKICAgICAgdGhpcy5jYWxjdWxhdGVDcml0aWNzQXZlcmFnZSgpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZ2V0RmlsbUNyaXRpY3M6IGZ1bmN0aW9uIGdldEZpbG1Dcml0aWNzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgRmlsbVNlcnZpY2UuZ2V0RmlsbUJ5SWQodGhpcy5maWxtSW5mb3MuaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMuZmlsbUNyaXRpY3MgPSByZXNwb25zZS5kYXRhLmNyaXRpYzsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgX3RoaXMuZXJyb3IgPSBlcnJvcjsKICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgY2FsY3VsYXRlQ3JpdGljc0F2ZXJhZ2U6IGZ1bmN0aW9uIGNhbGN1bGF0ZUNyaXRpY3NBdmVyYWdlKCkgewogICAgICBpZiAodGhpcy5uYk9mQ3JpdGljcyA+PSA1KSB7CiAgICAgICAgdmFyIGk7CgogICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLm5iT2ZDcml0aWNzOyBpKyspIHsKICAgICAgICAgIHRoaXMuY3JpdGljc0F2ZXJhZ2UgKz0gcGFyc2VGbG9hdCh0aGlzLmZpbG1Dcml0aWNzW2ldLnNjb3JlKTsKICAgICAgICB9CgogICAgICAgIHRoaXMuY3JpdGljc0F2ZXJhZ2UgPSBNYXRoLnJvdW5kKHRoaXMuY3JpdGljc0F2ZXJhZ2UgLyB0aGlzLm5iT2ZDcml0aWNzICogMTAwKSAvIDEwMDsgLy9kaXZpc2lvbiBwYXIgMjAgcG91ciByYW1lbmVyIHN1ciA1CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jcml0aWNzQXZlcmFnZSA9IDA7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["FilmReviewDisplay.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA,OAAA,UAAA,MAAA,iBAAA;AACA,OAAA,WAAA,MAAA,2BAAA;AACA,eAAA;AACA,EAAA,KAAA,EAAA;AACA,IAAA,SAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA,IAFA;AAGA,MAAA,QAAA,EAAA;AAHA;AADA,GADA;AAQA,EAAA,UAAA,EAAA;AACA,IAAA,UAAA,EAAA;AADA,GARA;AAWA,EAAA,IAXA,kBAWA;AACA,WAAA;AACA,MAAA,WAAA,EAAA;AAAA,iBAAA;AAAA,OADA;AAEA,MAAA,cAAA,EAAA,IAFA;AAGA,MAAA,WAAA,EAAA;AAHA,KAAA;AAKA,GAjBA;AAkBA,EAAA,OAlBA,qBAkBA;AACA,SAAA,cAAA;AACA,GApBA;AAqBA,EAAA,KAAA,EAAA;AACA,IAAA,SAAA,EAAA,qBAAA;AACA,WAAA,cAAA;AACA,KAHA;AAIA,IAAA,WAAA,EAAA,uBAAA;AACA,WAAA,WAAA,GAAA,KAAA,WAAA,CAAA,MAAA;AACA,KANA;AAOA,IAAA,WAAA,EAAA,uBAAA;AACA,WAAA,uBAAA;AACA;AATA,GArBA;AAgCA,EAAA,OAAA,EAAA;AACA,IAAA,cADA,4BACA;AAAA;;AACA,WAAA,OAAA,GAAA,IAAA;AACA,MAAA,WAAA,CAAA,WAAA,CAAA,KAAA,SAAA,CAAA,EAAA,EACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,QAAA,KAAA,CAAA,WAAA,GAAA,QAAA,CAAA,IAAA,CAAA,MAAA;AACA,OAHA,EAIA,KAJA,CAIA,UAAA,KAAA,EAAA;AACA,QAAA,KAAA,CAAA,KAAA,GAAA,KAAA;AACA,OANA,EAOA,OAPA,CAOA;AAAA,eAAA,KAAA,CAAA,OAAA,GAAA,KAAA;AAAA,OAPA;AAQA,KAXA;AAYA,IAAA,uBAZA,qCAYA;AACA,UAAA,KAAA,WAAA,IAAA,CAAA,EAAA;AACA,YAAA,CAAA;;AACA,aAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,KAAA,WAAA,EAAA,CAAA,EAAA,EAAA;AACA,eAAA,cAAA,IAAA,UAAA,CAAA,KAAA,WAAA,CAAA,CAAA,EAAA,KAAA,CAAA;AACA;;AACA,aAAA,cAAA,GAAA,IAAA,CAAA,KAAA,CAAA,KAAA,cAAA,GAAA,KAAA,WAAA,GAAA,GAAA,IAAA,GAAA,CALA,CAKA;AACA,OANA,MAOA;AACA,aAAA,cAAA,GAAA,CAAA;AACA;AACA;AAvBA;AAhCA,CAAA","sourcesContent":["<template>\r\n    <div class=\"ratingStars\">\r\n\r\n                    <span></span>\r\n                    <div v-if=\"nbOfCritics >= 5\">\r\n                       <span class=\"starRate\"><star-rating\r\n                            \r\n                            v-bind:increment=\"0.5\"\r\n                            v-bind:max-rating=\"5\"\r\n                            inactive-color=\"#dbdbdb\"\r\n                            active-color=\"#cc1166\"\r\n                            v-bind:star-size=\"40\"\r\n                            :rating=\"criticsAverage\" \r\n                            :read-only=\"true\"/> </span> \r\n                    </div>\r\n                    <div v-else>\r\n                         <span class=\"starRate\"><star-rating\r\n                            \r\n                            v-bind:increment=\"0.5\"\r\n                            v-bind:max-rating=\"5\"\r\n                            inactive-color=\"#dbdbdb\"\r\n                            active-color=\"#cc1166\"\r\n                            v-bind:star-size=\"40\"\r\n                            :rating=\"0\"\r\n                            :read-only=\"true\"\r\n                             />  not enough reviews</span> \r\n                    </div>\r\n\r\n            \r\n\r\n        </div>\r\n</template>\r\n\r\n<script>\r\nimport StarRating from 'vue-star-rating';\r\nimport FilmService from '@/services/FilmService.js';\r\n    export default {\r\n        props: {\r\n            filmInfos: {\r\n                type: Object,\r\n                default: null,\r\n                required : true\r\n            },\r\n        },\r\n        components: {\r\n            StarRating,\r\n        },\r\n        data() {\r\n            return {\r\n                filmCritics: {'empty':'string'},\r\n                criticsAverage: null,\r\n                nbOfCritics: 0\r\n            }\r\n        },\r\n        created () {\r\n            this.getFilmCritics();\r\n        },\r\n        watch: {\r\n            filmInfos : function() {\r\n                this.getFilmCritics();\r\n            },\r\n            filmCritics : function(){\r\n                this.nbOfCritics =this.filmCritics.length; \r\n            },\r\n            nbOfCritics: function(){\r\n                this.calculateCriticsAverage()\r\n            }\r\n        },\r\n        methods: {\r\n            getFilmCritics() {\r\n                this.loading =true;\r\n                FilmService.getFilmById(this.filmInfos.id)\r\n                .then(response => {\r\n                this.filmCritics = response.data.critic;\r\n                })\r\n                .catch(error => {\r\n                this.error = error;\r\n                })\r\n                .finally(() => this.loading =false);\r\n            },\r\n            calculateCriticsAverage() {\r\n                    if (this.nbOfCritics >= 5) {\r\n                         var i;\r\n                        for (i = 0; i < this.nbOfCritics; i++) {\r\n                            this.criticsAverage+= parseFloat( this.filmCritics[i].score);\r\n                        }\r\n                        this.criticsAverage = Math.round(((this.criticsAverage/this.nbOfCritics)*100)) /100; //division par 20 pour ramener sur 5\r\n                    }\r\n                    else {\r\n                        this.criticsAverage = 0;\r\n                    }\r\n            },\r\n        },\r\n        \r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"],"sourceRoot":"src/components"}]}