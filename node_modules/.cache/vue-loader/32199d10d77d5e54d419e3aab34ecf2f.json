{"remainingRequest":"C:\\Users\\carlo\\Documents\\TP2\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\carlo\\Documents\\TP2\\src\\components\\HomeMoviesList.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\carlo\\Documents\\TP2\\src\\components\\HomeMoviesList.vue","mtime":1588477673779},{"path":"C:\\Users\\carlo\\Documents\\TP2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\carlo\\Documents\\TP2\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\carlo\\Documents\\TP2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\carlo\\Documents\\TP2\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOw0KaW1wb3J0IEZpbG1TZXJ2aWNlIGZyb20gJ0Avc2VydmljZXMvRmlsbVNlcnZpY2UuanMnOw0KaW1wb3J0IEZpbG1EZXRhaWxzIGZyb20gJ0AvY29tcG9uZW50cy9GaWxtRGV0YWlscy52dWUnOw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnSGVsbG9Xb3JsZCcsDQogIGNvbXBvbmVudHM6IHsNCiAgIEZpbG1EZXRhaWxzDQogIH0sDQogIHByb3BzOiB7DQogICAgZmlsbXNEYXRhOiB7DQogICAgICB0eXBlIDogT2JqZWN0LA0KICAgICAgZGVmYXVsdCA6IG51bGwNCiAgICB9DQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHBhZ2VzRGF0YTogW10sDQogICAgICByZXF1aXJlZCA6IHRydWUNCiAgICB9DQogIH0sDQogDQogY29tcHV0ZWQ6IHsNCiAgICBsYXN0UGFnZU5iKCkgew0KICAgICAgaWYgKHRoaXMuZmlsbXNEYXRhICE9IG51bGwpIHsNCiAgICAgICAgcmV0dXJuIHRoaXMuZmlsbXNEYXRhLm1ldGEubGFzdF9wYWdlOw0KICAgICAgfQ0KICAgICAgIGVsc2V7DQogICAgICAgICByZXR1cm4gMDsNCiAgICAgICB9DQogICAgfSwNCiAgICBsb2FkaW5nKCkgew0KICAgICAgaWYodGhpcy5sYXN0UGFnZU5iID09IG51bGwpIHsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICB9DQogICAgICBlbHNlIHsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICBmaWxtc0RhdGE6IGZ1bmN0aW9uKCkgew0KICAgICAgdGhpcy5nZXREYXRhKCk7DQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgYWRkSWRUb0RhdGEoZGF0YUFycmF5KSB7DQogICAgICBmb3IgKGxldCBkYXRhIG9mIGRhdGFBcnJheSkgew0KICAgICAgICB0aGlzLnBhZ2VzRGF0YS5wdXNoKGRhdGFbJ2lkJ10pOw0KICAgICAgfQ0KICAgIH0sDQogICAgZ2V0RGF0YSgpIHsNCiAgICAgICBheGlvcy5hbGwoWw0KICAgICAgRmlsbVNlcnZpY2UuZ2V0RmlsbXNQYWdlKHRoaXMubGFzdFBhZ2VOYiksDQogICAgICBGaWxtU2VydmljZS5nZXRGaWxtc1BhZ2UodGhpcy5sYXN0UGFnZU5iIC0xKQ0KICAgICAgXSkNCiAgICAgIC50aGVuKGF4aW9zLnNwcmVhZCgobGFzdCwgc2Vjb25kTGFzdCkgPT4gew0KICAgICAgdGhpcy5hZGRJZFRvRGF0YShzZWNvbmRMYXN0LmRhdGEuZGF0YSk7DQogICAgICB0aGlzLmFkZElkVG9EYXRhKGxhc3QuZGF0YS5kYXRhKTsgLy90aGlzLnBhZ2VzRGF0YS5wdXNoKEpTT04uc3RyaW5naWZ5KHNlY29uZExhc3QuZGF0YS5kYXRhWzBdKSksdGhpcy5wYWdlc0RhdGEucHVzaChKU09OLnN0cmluZ2lmeShsYXN0LmRhdGEuZGF0YSkpLy8gLCB0aGlzLnBhZ2VzRGF0YS5wdXNoKChsYXN0LmRhdGEuZGF0YS5pZCkudG9TdHJpbmcpDQogICAgfSkNCiAgKTsgDQogICAgfQ0KICB9LA0KICAgIA0KDQp9DQoNCg=="},{"version":3,"sources":["HomeMoviesList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA","file":"HomeMoviesList.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"HomeMovieList\">\r\n    <section v-if=\"loading\">\r\n            <h2>Chargement en cours...</h2>\r\n    </section>\r\n    <section v-else>\r\n      <film-details :filmId=pagesData[pagesData.length-1] />\r\n      <film-details :filmId=pagesData[pagesData.length-2] />\r\n      <film-details :filmId=pagesData[pagesData.length-3] />\r\n    </section>\r\n    \r\n    <ul class=\"films\">\r\n     \r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport FilmService from '@/services/FilmService.js';\r\nimport FilmDetails from '@/components/FilmDetails.vue';\r\nexport default {\r\n  name: 'HelloWorld',\r\n  components: {\r\n   FilmDetails\r\n  },\r\n  props: {\r\n    filmsData: {\r\n      type : Object,\r\n      default : null\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      pagesData: [],\r\n      required : true\r\n    }\r\n  },\r\n \r\n computed: {\r\n    lastPageNb() {\r\n      if (this.filmsData != null) {\r\n        return this.filmsData.meta.last_page;\r\n      }\r\n       else{\r\n         return 0;\r\n       }\r\n    },\r\n    loading() {\r\n      if(this.lastPageNb == null) {\r\n        return true;\r\n      }\r\n      else {\r\n        return false;\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    filmsData: function() {\r\n      this.getData();\r\n    }\r\n  },\r\n  methods: {\r\n    addIdToData(dataArray) {\r\n      for (let data of dataArray) {\r\n        this.pagesData.push(data['id']);\r\n      }\r\n    },\r\n    getData() {\r\n       axios.all([\r\n      FilmService.getFilmsPage(this.lastPageNb),\r\n      FilmService.getFilmsPage(this.lastPageNb -1)\r\n      ])\r\n      .then(axios.spread((last, secondLast) => {\r\n      this.addIdToData(secondLast.data.data);\r\n      this.addIdToData(last.data.data); //this.pagesData.push(JSON.stringify(secondLast.data.data[0])),this.pagesData.push(JSON.stringify(last.data.data))// , this.pagesData.push((last.data.data.id).toString)\r\n    })\r\n  ); \r\n    }\r\n  },\r\n    \r\n\r\n}\r\n\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n\r\n</style>\r\n"]}]}