{"remainingRequest":"C:\\Users\\carlo\\OneDrive\\Bureau\\test\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\carlo\\OneDrive\\Bureau\\test\\src\\components\\FilmReviewDisplay.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\carlo\\OneDrive\\Bureau\\test\\src\\components\\FilmReviewDisplay.vue","mtime":1588552418260},{"path":"C:\\Users\\carlo\\OneDrive\\Bureau\\test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\carlo\\OneDrive\\Bureau\\test\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\carlo\\OneDrive\\Bureau\\test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\carlo\\OneDrive\\Bureau\\test\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgU3RhclJhdGluZyBmcm9tICd2dWUtc3Rhci1yYXRpbmcnOw0KaW1wb3J0IEZpbG1TZXJ2aWNlIGZyb20gJ0Avc2VydmljZXMvRmlsbVNlcnZpY2UuanMnOw0KICAgIGV4cG9ydCBkZWZhdWx0IHsNCiAgICAgICAgcHJvcHM6IHsNCiAgICAgICAgICAgIGZpbG1JbmZvczogew0KICAgICAgICAgICAgICAgIHR5cGU6IE9iamVjdCwNCiAgICAgICAgICAgICAgICBkZWZhdWx0OiBudWxsLA0KICAgICAgICAgICAgICAgIHJlcXVpcmVkIDogdHJ1ZQ0KICAgICAgICAgICAgfSwNCiAgICAgICAgfSwNCiAgICAgICAgY29tcG9uZW50czogew0KICAgICAgICAgICAgU3RhclJhdGluZywNCiAgICAgICAgfSwNCiAgICAgICAgZGF0YSgpIHsNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgZmlsbUNyaXRpY3M6IHsnZW1wdHknOidzdHJpbmcnfSwNCiAgICAgICAgICAgICAgICBjcml0aWNzQXZlcmFnZTogbnVsbCwNCiAgICAgICAgICAgICAgICBuYk9mQ3JpdGljczogMA0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBjcmVhdGVkICgpIHsNCiAgICAgICAgICAgIHRoaXMuZ2V0RmlsbUNyaXRpY3MoKTsNCiAgICAgICAgfSwNCiAgICAgICAgd2F0Y2g6IHsNCiAgICAgICAgICAgIGZpbG1JbmZvcyA6IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgIHRoaXMuZ2V0RmlsbUNyaXRpY3MoKTsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBmaWxtQ3JpdGljcyA6IGZ1bmN0aW9uKCl7DQogICAgICAgICAgICAgICAgdGhpcy5uYk9mQ3JpdGljcyA9dGhpcy5maWxtQ3JpdGljcy5sZW5ndGg7IA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIG5iT2ZDcml0aWNzOiBmdW5jdGlvbigpew0KICAgICAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlQ3JpdGljc0F2ZXJhZ2UoKQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBtZXRob2RzOiB7DQogICAgICAgICAgICBnZXRGaWxtQ3JpdGljcygpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPXRydWU7DQogICAgICAgICAgICAgICAgRmlsbVNlcnZpY2UuZ2V0RmlsbUJ5SWQodGhpcy5maWxtSW5mb3MuaWQpDQogICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuZmlsbUNyaXRpY3MgPSByZXNwb25zZS5kYXRhLmNyaXRpYzsNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yOw0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4gdGhpcy5sb2FkaW5nID1mYWxzZSk7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgY2FsY3VsYXRlQ3JpdGljc0F2ZXJhZ2UoKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm5iT2ZDcml0aWNzID49IDUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLm5iT2ZDcml0aWNzOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNyaXRpY3NBdmVyYWdlKz0gcGFyc2VGbG9hdCggdGhpcy5maWxtQ3JpdGljc1tpXS5zY29yZSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNyaXRpY3NBdmVyYWdlID0gTWF0aC5yb3VuZCgoKHRoaXMuY3JpdGljc0F2ZXJhZ2UvdGhpcy5uYk9mQ3JpdGljcykqMTAwKS8yMCoxKSAvMTAwOyAvL2RpdmlzaW9uIHBhciAyMCBwb3VyIHJhbWVuZXIgc3VyIDUNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3JpdGljc0F2ZXJhZ2UgPSAwOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9LA0KICAgICAgICB9LA0KICAgICAgICANCiAgICB9DQo="},{"version":3,"sources":["FilmReviewDisplay.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"FilmReviewDisplay.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div class=\"ratingStars\">\r\n\r\n                    <span></span>\r\n                    <div v-if=\"nbOfCritics >= 5\">\r\n                       <span class=\"starRate\"><star-rating\r\n                            \r\n                            v-bind:increment=\"0.5\"\r\n                            v-bind:max-rating=\"5\"\r\n                            inactive-color=\"#dbdbdb\"\r\n                            active-color=\"#cc1166\"\r\n                            v-bind:star-size=\"40\"\r\n                            :rating=\"criticsAverage\" \r\n                            :read-only=\"true\"/> </span> \r\n                    </div>\r\n                    <div v-else>\r\n                         <span class=\"starRate\"><star-rating\r\n                            \r\n                            v-bind:increment=\"0.5\"\r\n                            v-bind:max-rating=\"5\"\r\n                            inactive-color=\"#dbdbdb\"\r\n                            active-color=\"#cc1166\"\r\n                            v-bind:star-size=\"40\"\r\n                            :rating=\"0\"\r\n                            :read-only=\"true\"\r\n                             />  not enough reviews</span> \r\n                    </div>\r\n\r\n            \r\n\r\n        </div>\r\n</template>\r\n\r\n<script>\r\nimport StarRating from 'vue-star-rating';\r\nimport FilmService from '@/services/FilmService.js';\r\n    export default {\r\n        props: {\r\n            filmInfos: {\r\n                type: Object,\r\n                default: null,\r\n                required : true\r\n            },\r\n        },\r\n        components: {\r\n            StarRating,\r\n        },\r\n        data() {\r\n            return {\r\n                filmCritics: {'empty':'string'},\r\n                criticsAverage: null,\r\n                nbOfCritics: 0\r\n            }\r\n        },\r\n        created () {\r\n            this.getFilmCritics();\r\n        },\r\n        watch: {\r\n            filmInfos : function() {\r\n                this.getFilmCritics();\r\n            },\r\n            filmCritics : function(){\r\n                this.nbOfCritics =this.filmCritics.length; \r\n            },\r\n            nbOfCritics: function(){\r\n                this.calculateCriticsAverage()\r\n            }\r\n        },\r\n        methods: {\r\n            getFilmCritics() {\r\n                this.loading =true;\r\n                FilmService.getFilmById(this.filmInfos.id)\r\n                .then(response => {\r\n                this.filmCritics = response.data.critic;\r\n                })\r\n                .catch(error => {\r\n                this.error = error;\r\n                })\r\n                .finally(() => this.loading =false);\r\n            },\r\n            calculateCriticsAverage() {\r\n                    if (this.nbOfCritics >= 5) {\r\n                         var i;\r\n                        for (i = 0; i < this.nbOfCritics; i++) {\r\n                            this.criticsAverage+= parseFloat( this.filmCritics[i].score);\r\n                        }\r\n                        this.criticsAverage = Math.round(((this.criticsAverage/this.nbOfCritics)*100)/20*1) /100; //division par 20 pour ramener sur 5\r\n                    }\r\n                    else {\r\n                        this.criticsAverage = 0;\r\n                    }\r\n            },\r\n        },\r\n        \r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}